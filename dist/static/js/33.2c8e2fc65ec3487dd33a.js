webpackJsonp([33],{OBnJ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("TToO"),a=r("7+uW"),n=r("c+8m"),s=r.n(n),i=r("DZ+H"),d=r("ymRw"),l=r("TJML"),u=r("EOM2"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=!1,t.detail="",t.refundObj={refundType:"REFUND",refundImgs:[],reason:""},t.orderId="",t.money="",t}return o.c(t,e),t.prototype.changerefundType=function(e){this.refundObj.refundType=e,console.log("退款类型",this.refundObj.refundType)},t.prototype.doRefund=function(){var e=this;console.log(this.refundObj.refundImgs.join(","));var t="/order/refund/apply",r=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderItem.orderId,money:this.orderItem.payTotal},this.refundObj);"FAIL_REFUND"==this.orderItem.detailList[0].refundStatus&&(t="/order/refund/reapply",r=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,refundId:this.orderItem.detailList[0].refundOrderList[0].refundId,money:this.orderItem.payTotal},this.refundObj)),a.default.prototype.$reqFormPost(t,r,function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message);e.model=!1,e.$Message.success("申请成功"),e.$emit("getList")}else console.log("网络请求错误！")})},t.prototype.removeByValue=function(e,t){for(var r=0;r<e.length;r++)if(e[r]==t){e.splice(r,1);break}},t.prototype.onRead=function(e){var t=this;console.log();var r=new FormData;r.append("file",e.file),a.default.prototype.$reqFormUpload("/fileupload",r,function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);var r=t.refundObj.refundImgs?t.refundObj.refundImgs:[];r.push(e.data.data.filename),t.refundObj.refundImgs=r,console.log("文件上传",e.data.data.filename)}else console.log("网络请求错误！")})},t.prototype.formatStatus=function(e){switch(e){case"ORDER_WAIT_PAY":return"未付款";case"ORDER_CANCEL_PAY":return"已取消";case"ORDER_WAIT_SENDGOODS":return"未发货";case"ORDER_WAIT_RECVGOODS":return"未收货";case"ORDER_END_GOODS":return"交易结束";case"ORDER_WAIT_REVIEW":return"交易完成"}},t.prototype.queryDetail=function(){var e=this;a.default.prototype.$reqFormPost("/order/queryorderdetail",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderId,money:this.money},function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message);e.detail=t.data.data,console.log(t.data.data)}else console.log("网络请求错误！")})},t.prototype.formatStatusColor=function(e){switch(e){case"ORDER_WAIT_SENDGOODS":case"ORDER_WAIT_RECVGOODS":case"ORDER_CANCEL_PAY":case"ORDER_WAIT_PAY":return"color:red";case"ORDER_WAIT_REVIEW":return"color:#ffc630";case"ORDER_FINISH":return"color:#ffc630;"}},t.prototype.mounted=function(){},o.b([Object(u.Prop)({required:!1})],t.prototype,"orderItem",void 0),t=o.b([s()({components:{comhead:l.a},mixins:[i.a]})],t)}(a.default),p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.model?o("div",{staticStyle:{position:"relative"}},[o("div",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"99999",position:"fixed",width:"100%",height:"100vh",top:"0",left:"0"}},[o("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{height:"100vh"}},[o("div",{staticClass:"flex flex-around-justify flex-align-center flex-v",staticStyle:{"background-color":"#fff",width:"780px",padding:"20px","border-radius":"10px",position:"relative"}},[o("div",{staticStyle:{position:"absolute",top:"10px",right:"10px"},on:{click:function(t){e.model=!1}}},[o("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:r("Bvvs")}})]),e._v(" "),o("div",{staticClass:"flex btn_refund"},[o("div",[e._v("售后类型")]),e._v(" "),o("button",{staticClass:"selectBox",class:"REFUND"==e.refundObj.refundType?"selectType":"",on:{click:function(t){e.changerefundType("REFUND")}}},[e._v("未收到货,只退款")]),e._v(" "),o("button",{staticClass:"selectBox",class:"GOODS_RETURN"==e.refundObj.refundType?"selectType":"",on:{click:function(t){e.changerefundType("GOODS_RETURN")}}},[e._v("退货退款")])]),e._v(" "),o("div",{staticStyle:{width:"100%",border:"1px #e5e5e5 solid",margin:"10px","border-radius":"8px"}},[o("div",{staticStyle:{width:"100%","border-bottom":"1px #e5e5e5 solid",height:"43px","line-height":"43px",padding:"0 10px"}},[e._v("\r\n              提示：快递到达后请拒收快递，否则退款将被拒绝\r\n            ")]),e._v(" "),o("div",{staticStyle:{padding:"5px"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.refundObj.reason,expression:"refundObj.reason"}],staticStyle:{"vertical-align":"top",width:"100%",border:"none"},attrs:{placeholder:"请填写申请理由",type:"text",name:"content",rows:"9"},domProps:{value:e.refundObj.reason},on:{input:function(t){t.target.composing||e.$set(e.refundObj,"reason",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"flex",staticStyle:{margin:"10px"}},[o("div",{staticClass:"el-upload--picture-card"},[o("van-uploader",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{width:"100%",height:"100%"},attrs:{"after-read":e.onRead,accept:"image/jpg,image/png, image/jpeg"}},[o("van-icon",{attrs:{name:"photograph"}})],1)],1),e._v(" "),e._l(e.refundObj.refundImgs,function(t,r){return o("div",{key:r,staticClass:"el-upload--picture-card",staticStyle:{position:"relative"}},[o("img",{staticStyle:{width:"100%"},attrs:{src:t}}),e._v(" "),o("i",{staticClass:"iconfont icon-shanchu3",staticStyle:{color:"#000",position:"absolute",right:"-8px",top:"-8px",height:"17px","line-height":"17px"},on:{click:function(r){e.removeByValue(e.refundObj.refundImgs,t)}}})])})],2),e._v(" "),o("div",{staticStyle:{margin:"10px"}},[o("van-button",{staticStyle:{width:"150px",height:"45px","background-color":"#FCCB52",color:"#fff","text-align":"center","line-height":"45px","margin-right":"10px"},attrs:{size:"large"},on:{click:function(t){e.doRefund()}}},[e._v("提交")])],1)])])])]):e._e()},staticRenderFns:[]};var f=r("VU/8")(c,p,!1,function(e){r("zrGJ")},"data-v-61027f01",null);t.default=f.exports},zrGJ:function(e,t){}});
//# sourceMappingURL=33.2c8e2fc65ec3487dd33a.js.map