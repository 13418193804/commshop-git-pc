webpackJsonp([1,32],{"57cK":function(t,e){},"6taJ":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("TToO"),a=r("7+uW"),s=r("c+8m"),i=r.n(s),n=r("DZ+H"),d=r("ymRw"),l=r("h1Nz"),u=r("au/Y"),c=r("OBnJ"),p=r("TJML"),f=r("EOM2"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reim_model=!1,e.detail="",e.refundObj={refundType:"REFUND",refundImgs:[],reason:""},e.orderId="",e.money="",e}return o.c(e,t),e.prototype.changerefundType=function(t){this.refundObj.refundType=t,console.log("退款类型",this.refundObj.refundType)},e.prototype.doRefund=function(){var t=this;console.log(this.refundObj.refundImgs.join(","));var e="/order/refund/apply",r=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderItem.orderId,money:this.orderItem.payTotal},this.refundObj);"FAIL_REFUND"==this.orderItem.detailList[0].refundStatus&&(e="/order/refund/reapply",r=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,refundId:this.orderItem.detailList[0].refundOrderList[0].refundId,money:this.orderItem.payTotal},this.refundObj)),a.default.prototype.$reqFormPost(e,r,function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);t.reim_model=!1,t.$Message.success("申请成功"),t.$emit("getList")}else console.log("网络请求错误！")})},e.prototype.removeByValue=function(t,e){for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1);break}},e.prototype.onRead=function(t){var e=this;console.log();var r=new FormData;r.append("file",t.file),a.default.prototype.$reqFormUpload("/fileupload",r,function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message);var r=e.refundObj.refundImgs?e.refundObj.refundImgs:[];r.push(t.data.data.filename),e.refundObj.refundImgs=r,console.log("文件上传",t.data.data.filename)}else console.log("网络请求错误！")})},e.prototype.formatStatus=function(t){switch(t){case"ORDER_WAIT_PAY":return"未付款";case"ORDER_CANCEL_PAY":return"已取消";case"ORDER_WAIT_SENDGOODS":return"未发货";case"ORDER_WAIT_RECVGOODS":return"未收货";case"ORDER_END_GOODS":return"交易结束";case"ORDER_WAIT_REVIEW":return"交易完成"}},e.prototype.queryDetail=function(){var t=this;a.default.prototype.$reqFormPost("/order/queryorderdetail",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderId,money:this.money},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);t.detail=e.data.data,console.log(e.data.data)}else console.log("网络请求错误！")})},e.prototype.formatStatusColor=function(t){switch(t){case"ORDER_WAIT_SENDGOODS":case"ORDER_WAIT_RECVGOODS":case"ORDER_CANCEL_PAY":case"ORDER_WAIT_PAY":return"color:red";case"ORDER_WAIT_REVIEW":return"color:#ffc630";case"ORDER_FINISH":return"color:#ffc630;"}},e.prototype.mounted=function(){},o.b([Object(f.Prop)({required:!1})],e.prototype,"orderItem",void 0),e=o.b([i()({components:{comhead:p.a},mixins:[n.a]})],e)}(a.default),_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.reim_model?o("div",{staticStyle:{position:"relative"}},[o("div",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"99999",position:"fixed",width:"100%",height:"100vh",top:"0",left:"0"}},[o("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{height:"100vh"}},[o("div",{staticClass:"flex flex-around-justify flex-align-center flex-v",staticStyle:{"background-color":"#fff",width:"780px",padding:"20px","border-radius":"10px",position:"relative"}},[o("div",{staticStyle:{position:"absolute",top:"10px",right:"10px"},on:{click:function(e){t.reim_model=!1}}},[o("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:r("Bvvs")}})]),t._v(" "),o("div",{staticClass:"flex btn_refund"},[o("div",[t._v("售后类型")]),t._v(" "),o("button",{staticClass:"selectBox",class:"REFUND"==t.refundObj.refundType?"selectType":"",on:{click:function(e){t.changerefundType("REFUND")}}},[t._v("未收到货,只退款")]),t._v(" "),o("button",{staticClass:"selectBox",class:"GOODS_RETURN"==t.refundObj.refundType?"selectType":"",on:{click:function(e){t.changerefundType("GOODS_RETURN")}}},[t._v("退货退款")])]),t._v(" "),o("div",{staticStyle:{width:"100%",border:"1px #e5e5e5 solid",margin:"10px","border-radius":"8px"}},[o("div",{staticStyle:{width:"100%","border-bottom":"1px #e5e5e5 solid",height:"43px","line-height":"43px",padding:"0 10px"}},[t._v("\r\n              提示：快递到达后请拒收快递，否则退款将被拒绝\r\n            ")]),t._v(" "),o("div",{staticStyle:{padding:"5px"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.refundObj.reason,expression:"refundObj.reason"}],staticStyle:{"vertical-align":"top",width:"100%",border:"none"},attrs:{placeholder:"请填写申请理由",type:"text",name:"content",rows:"9"},domProps:{value:t.refundObj.reason},on:{input:function(e){e.target.composing||t.$set(t.refundObj,"reason",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"flex",staticStyle:{margin:"10px"}},[o("div",{staticClass:"el-upload--picture-card"},[o("van-uploader",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{width:"100%",height:"100%"},attrs:{"after-read":t.onRead,accept:"image/jpg,image/png, image/jpeg"}},[o("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),t._l(t.refundObj.refundImgs,function(e,r){return o("div",{key:r,staticClass:"el-upload--picture-card",staticStyle:{position:"relative"}},[o("img",{staticStyle:{width:"100%"},attrs:{src:e}}),t._v(" "),o("i",{staticClass:"iconfont icon-shanchu3",staticStyle:{color:"#000",position:"absolute",right:"-8px",top:"-8px",height:"17px","line-height":"17px"},on:{click:function(r){t.removeByValue(t.refundObj.refundImgs,e)}}})])})],2),t._v(" "),o("div",{staticStyle:{margin:"10px"}},[o("van-button",{staticStyle:{width:"150px",height:"45px","background-color":"#FCCB52",color:"#fff","text-align":"center","line-height":"45px","margin-right":"10px"},attrs:{size:"large"},on:{click:function(e){t.doRefund()}}},[t._v("提交")])],1)])])])]):t._e()},staticRenderFns:[]};var v=r("VU/8")(g,_,!1,function(t){r("rjHg")},"data-v-3cfd75d1",null).exports,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ship_model=!1,e.shipInfoList=[],e}return o.c(e,t),e.prototype.getShipInfoList=function(t,e){var r=this;a.default.prototype.$reqFormPost("/transport/info",{com:e,nu:t},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);console.log(e.data.data),console.log(t),r.shipInfoList=e.data.data}else console.log("网络请求错误！")})},e.prototype.mounted=function(){},e=o.b([i()({components:{comhead:p.a},mixins:[n.a]})],e)}(a.default),h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.ship_model?o("div",{staticStyle:{position:"relative"}},[o("div",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"99999",position:"fixed",width:"100%",height:"100vh",top:"0",left:"0"}},[o("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{height:"100vh"}},[o("div",{staticClass:"flex flex-around-justify flex-align-center flex-v",staticStyle:{"background-color":"#fff",width:"780px",padding:"20px","border-radius":"10px",position:"relative"}},[o("div",{staticStyle:{position:"absolute",top:"10px",right:"10px"},on:{click:function(e){t.ship_model=!1}}},[o("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:r("Bvvs")}})]),t._v(" "),o("div",{staticStyle:{"font-size":"16px"}},[t._v("查看物流")]),t._v(" "),o("div",{staticClass:"detailBody"},t._l(t.shipInfoList,function(e){return o("div",[o("div",[t._v(t._s(e.time))]),t._v(" "),o("div",[t._v(t._s(e.context))])])}))])]),t._v(" "),o("div")])]):t._e()},staticRenderFns:[]};var m=r("VU/8")(y,h,!1,function(t){r("57cK")},"data-v-359ed76a",null).exports,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loading=!1,e.finished=!1,e.orderItem={},e.orderList={orderList:{orderList:[],pageSize:10,loading:!0},orderList_pay:{orderList:[],pageSize:10,loading:!0},orderList_send:{orderList:[],pageSize:10,loading:!0},orderList_reacv:{orderList:[],pageSize:10,loading:!0},orderList_finish:{orderList:[],pageSize:10,loading:!0},orderList_refund:{orderList:[],pageSize:10,loading:!0}},e.active=0,e.orderTitleList=[{name:"全部",status:""},{name:"待付款",status:"ORDER_WAIT_PAY"},{name:"待发货",status:"ORDER_WAIT_SENDGOODS"},{name:"待收货",status:"ORDER_WAIT_RECVGOODS"},{name:"待评价",status:"ORDER_WAIT_REVIEW"},{name:"退换/售后",status:"REFUND"}],e.Pageindex=0,e}return o.c(e,t),e.prototype.goRefund=function(t){this.orderItem=t,this.$refs.reimburse.model=!0},e.prototype.getList=function(){this.getOrderList(this.orderTitleList[this.active].status,!0)},e.prototype.onLoad=function(){setTimeout(function(){},500)},e.prototype.doDeleteOrder=function(t){var e=this;d.Dialog.confirm({title:"提示",message:"删除订单?"}).then(function(){a.default.prototype.$reqFormPost("/order/delete",{userId:e.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:e.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:t},function(t){if(null!=t)return 200!=t.data.status?(console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message)):void e.getOrderList(e.orderTitleList[e.active].status,!0);console.log("网络请求错误！")})}).catch(function(){})},e.prototype.payOrder=function(t){this.$router.push({name:"pay",query:{body:t.orderTitle,payId:t.payNo,payTotal:t.payTotal}})},e.prototype.loadMore=function(){var t=this;this.loading=!0;setTimeout(function(){t.orderList[t.returnKey()].pageSize+=10,t.getOrderList(t.orderTitleList[t.active].status)},1e3)},e.prototype.doCancel=function(t){var e=this;a.default.prototype.$reqFormPost("/order/cancel",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:t.orderId},function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message);e.getOrderList(e.orderTitleList[e.active].status,!0),console.log("取消订单")}else console.log("网络请求错误！")})},e.prototype.formatStatusColor=function(t){switch(t){case"ORDER_WAIT_SENDGOODS":case"ORDER_WAIT_RECVGOODS":case"ORDER_CANCEL_PAY":case"ORDER_WAIT_PAY":return"color:red";case"ORDER_WAIT_REVIEW":return"color:#ffc630";case"ORDER_FINISH":return"color:#ffc630;";case"ORDER_END_GOODS":return"color:#ffc630"}},e.prototype.getShip=function(t){var e=this.$refs.ship;e.ship_model=!0,e.getShipInfoList(t.transportNo,t.transportCode)},e.prototype.doRefund=function(t){this.orderItem=t,this.$refs.reimburseTwo.reim_model=!0},e.prototype.buyAgain=function(t){var e=this;a.default.prototype.$reqFormPost("/order/buyagain",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:t},function(t){if(null!=t)return 200!=t.data.status?(console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message)):void e.$router.push({name:"cart"});console.log("网络请求错误！")})},e.prototype.recvgoods=function(t){var e=this;d.Dialog.confirm({title:"提示",message:"确认收货?"}).then(function(){a.default.prototype.$reqFormPost("/order/recvgoods",{userId:e.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:e.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:t},function(t){if(null!=t)return 200!=t.data.status?(console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message)):void e.getOrderList(e.orderTitleList[e.active].status,!0);console.log("网络请求错误！")})}).catch(function(){})},e.prototype.formatButtonColor=function(){return"border-color:#ffc630;color:#000"},e.prototype.formatStatus=function(t){switch(t){case"ORDER_WAIT_PAY":return"未付款";case"ORDER_CANCEL_PAY":return"已取消";case"ORDER_WAIT_SENDGOODS":return"未发货";case"ORDER_WAIT_RECVGOODS":return"未收货";case"ORDER_END_GOODS":return"已评论";case"ORDER_WAIT_REVIEW":return"待评价";case"ORDER_FINISH":return"交易完成"}},e.prototype.returnKey=function(){switch(this.active){case 0:return"orderList";case 1:return"orderList_pay";case 2:return"orderList_send";case 3:return"orderList_reacv";case 4:return"orderList_finish";case 5:return"orderList_refund"}},e.prototype.getOrderList=function(t,e){var r=this;void 0===e&&(e=!1);var o=this.returnKey();a.default.prototype.$reqFormPost("REFUND"!=t?"/order/queryorder":"/refund/order/query",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderStatus:t,page:0,pageSize:this.orderList[o].pageSize},function(t){if(null!=t)return 200!=t.data.status?(console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message)):void((r.orderList[o].loading||e)&&(r.orderList[o].orderList=t.data.data.orderList,t.data.data.orderList.length!=r.orderList[o].pageSize&&(r.orderList[o].loading=!1)));console.log("网络请求错误！")})},e.prototype.goDetail=function(t){this.$router.push({name:"orderdetail",query:{orderId:t.orderId}})},e.prototype.gocomment=function(t){this.$router.push({name:"evaluate",query:{orderId:t.orderId}})},e.prototype.changePage=function(t){this.active=t,this.Pageindex=t,this.getOrderList(this.orderTitleList[t].status,!0)},e.prototype.mounted=function(){var t=this;this.$emit("selectMenu",{name:"我的订单",url:"/orderlist"}),this.orderTitleList.forEach(function(e,r){if(t.$route.query.orderStatus==e.status)return t.active=r,void(t.Pageindex=r)}),"REFUND"!==this.$route.query.orderStatus&&this.getOrderList(this.orderTitleList[this.active].status)},e=o.b([i()({components:{Wintabe:l.a,Winbeet:u.a,reimburse:c.default,reimburseTwo:v,ship:m},mixins:[n.a]})],e)}(a.default),I={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-contents"},[r("div",{staticClass:"flex",staticStyle:{"background-color":"#FBFBFB",border:"1px solid #e5e5e5"}},t._l(t.orderTitleList,function(e,o){return r("div",{staticClass:"flex-1",staticStyle:{height:"37px","line-height":"37px","text-align":"center"},style:t.active==o?"background-color:#E1E1E1":"",on:{click:function(e){t.changePage(o)}}},[r("span",[t._v(" "+t._s(e.name))])])})),t._v(" "),t.active==t.Pageindex?r("div",t._l(t.orderList[t.returnKey()].orderList,function(e,o){return r("div",{key:o,staticStyle:{border:"1px #e5e5e5 solid","margin-top":"20px"},on:{click:function(r){t.goDetail(e)}}},[r("div",{staticClass:"orderTitle textLabel  flex   flex-pack-justify"},[r("div",{staticStyle:{"padding-left":"10px"}},[r("span",{staticStyle:{"margin-right":"30px"}},[t._v("  下单时间:"+t._s(e.createTime))]),t._v(" "),r("span",[t._v("  订单号:"+t._s(e.orderId))])]),t._v(" "),r("div",{staticClass:"flex flex-align-center"},["0"!=t.active||"ORDER_FINISH"!==e.orderStatus||"WITHOUT_REFUND"!=e.detailList[0].refundStatus&&"SUCCEED_REFUND"!=e.detailList[0].refundStatus?r("div",{staticStyle:{width:"10px"}}):r("div",{staticStyle:{padding:"0 15px",position:"relative"},on:{click:function(r){r.stopPropagation(),t.doDeleteOrder(e.orderId)}}},[r("div",{staticClass:"deleteBorder"}),t._v(" "),r("i",{staticClass:"iconfont icon-iconfontshanchu3"})])])]),t._v(" "),r("div",{staticClass:"detailBody"},t._l(e.detailList,function(o){return r("div",[r("div",{staticClass:"product1"},[r("div",{staticClass:"flex flex-align-center"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.goodsImg,expression:"items.goodsImg"}],staticStyle:{height:"80px",width:"80px","border-radius":"5px",border:"1px #e5e5e5 solid"}})]),t._v(" "),r("div",{staticClass:"flex-1",staticStyle:{"font-size":"12px",overflow:"hidden",padding:"0 10px"}},[r("div",{staticClass:"lineTwoType"},[t._v(t._s(o.goodsName))]),t._v(" "),r("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",color:"#999"}},[r("div",{staticClass:"textLabel",staticStyle:{color:"#666"}},[o.skuKeyValue.length>2?r("span",t._l(JSON.parse(o.skuKeyValue),function(e){return r("span",{staticStyle:{"margin-right":"10px"}},[r("span",[t._v(t._s(e.key)+":"+t._s(e.value)+" X "+t._s(o.goodsNum))])])})):r("span",[t._v("\n          X "+t._s(o.goodsNum)+"\n        ")])])])]),t._v(" "),r("div",{staticClass:"flex-1",staticStyle:{"font-size":"14.8px",width:"250px"}},[r("div",{staticClass:"  flex   flex-pack-center  flex  flex-align-center"},["0"==t.active&&"SUCCEED_REFUND"==e.detailList[0].refundStatus?r("span",{staticStyle:{color:"red"}},[t._v("退款完成")]):"5"!=t.active?r("span",{style:t.formatStatusColor(e.orderStatus)},[t._v(t._s(t.formatStatus(e.orderStatus)))]):t._e(),t._v(" "),"5"==t.active?r("span",["APPLY_REFUND"==e.detailList[0].refundStatus?r("span",{staticStyle:{color:"red"}},[t._v("退款中")]):t._e(),t._v(" "),"SUCCEED_REFUND"==e.detailList[0].refundStatus?r("span",{staticStyle:{color:"red"}},[t._v("退款完成")]):t._e(),t._v(" "),"WAIT_GOODS_BACK"==e.detailList[0].refundStatus?r("span",{staticStyle:{color:"red"}},[t._v("退款中")]):t._e(),t._v(" "),"WAIT_RECVGOODS"==e.detailList[0].refundStatus?r("span",{staticStyle:{color:"red"}},[t._v("退款中")]):t._e(),t._v(" "),"FAIL_REFUND"==e.detailList[0].refundStatus?r("span",{staticStyle:{color:"red"}},[t._v("已拒绝")]):t._e()]):t._e()]),t._v(" "),"ORDER_WAIT_PAY"===e.orderStatus?r("div",{staticClass:"settingBody"},[r("span",{staticStyle:{"margin-right":"10px"},on:{click:function(r){r.stopPropagation(),t.doCancel(e)}}},[t._v("取消订单")]),t._v(" "),r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.payOrder(e)}}},[t._v("支付订单")])]):t._e(),t._v(" "),"ORDER_WAIT_SENDGOODS"===e.orderStatus?r("div",{staticClass:"settingBody"},["APPLY_REFUND"==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.goDetail(e)}}},[t._v("取消退款")]):t._e(),t._v(" "),"WITHOUT_REFUND"==e.detailList[0].refundStatus||"FAIL_REFUND"==e.detailList[0].refundStatus?r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.goRefund(e)}}},[t._v("申请退款")]):t._e()]):t._e(),t._v(" "),"ORDER_WAIT_RECVGOODS"===e.orderStatus?r("div",{staticClass:"settingBody"},["WITHOUT_REFUND"==e.detailList[0].refundStatus||"FAIL_REFUND"==e.detailList[0].refundStatus?r("div",[r("span",{staticStyle:{"margin-right":"10px"},on:{click:function(r){r.stopPropagation(),t.getShip(e)}}},[t._v("查看物流")]),t._v(" "),r("span",{staticStyle:{"margin-right":"10px"},on:{click:function(r){r.stopPropagation(),t.doRefund(e)}}},[t._v("退货/退款")]),t._v(" "),r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.recvgoods(e.orderId)}}},[t._v("确认收货")])]):t._e(),t._v(" "),"APPLY_REFUND"==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("div",["WITHOUT_REFUND"!==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.goDetail(e)}}},[t._v("取消退款")]):t._e()]):t._e()]):t._e(),t._v(" "),"ORDER_WAIT_REVIEW"===e.orderStatus||"ORDER_FINISH"===e.orderStatus?r("div",{staticClass:"settingBody"},["WITHOUT_REFUND"==e.detailList[0].refundStatus||"FAIL_REFUND"==e.detailList[0].refundStatus?r("div",[r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.buyAgain(e.orderId)}}},[t._v("再次购买")]),t._v(" "),"ORDER_WAIT_REVIEW"===e.orderStatus?r("span",{staticStyle:{"margin-right":"10px"},on:{click:function(r){r.stopPropagation(),t.doRefund(e)}}},[t._v("退换/售后")]):t._e(),t._v(" "),"ORDER_WAIT_REVIEW"===e.orderStatus?r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.gocomment(e)}}},[t._v("评价商品")]):t._e()]):t._e(),t._v(" "),"APPLY_REFUND"==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("div",["APPLY_REFUND"==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),attrs:{size:"small"},on:{click:function(r){r.stopPropagation(),t.goDetail(e)}}},[t._v("取消退款")]):t._e()]):t._e()]):t._e(),t._v(" "),"ORDER_END_GOODS"===e.orderStatus?r("div",{staticClass:"settingBody"},["WITHOUT_REFUND"==e.detailList[0].refundStatus||"FAIL_REFUND"==e.detailList[0].refundStatus?r("div",[r("span",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:function(r){r.stopPropagation(),t.doRefund(e)}}},[t._v("退换/售后")]),t._v(" "),r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),attrs:{size:"small"},on:{click:function(r){r.stopPropagation(),t.getShip(e)}}},[t._v("查看物流")])]):t._e(),t._v(" "),"APPLY_REFUND"==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("div",["APPLY_REFUND"==e.detailList[0].refundStatus&&"FAIL_REFUND"!==e.detailList[0].refundStatus?r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.goDetail(e)}}},[t._v("取消退款")]):t._e()]):t._e()]):t._e(),t._v(" "),"ORDER_CANCEL_PAY"===e.orderStatus?r("div",{staticClass:"settingBody"},[r("span",{staticStyle:{"margin-right":"10px"},style:t.formatButtonColor(),on:{click:function(r){r.stopPropagation(),t.buyAgain(e.orderId)}}},[t._v("再次购买")])]):t._e()]),t._v(" "),r("div",{staticStyle:{"text-align":"center","font-size":"16px",width:"180px"}},[r("div",{},[r("span",[t._v("￥"+t._s(e.orderTotalPrice.toFixed(2)))])]),t._v(" "),r("div",{staticStyle:{"font-size":"12.6px",color:"#999"}},[r("span",[t._v("(含运费"+t._s(e.transportPrice.toFixed(2))+")")])])])])])}))])})):t._e(),t._v(" "),r("div",{staticClass:"flex flex-align-center flex-pack-center",staticStyle:{"font-size":"14px",padding:"15px"}},[t.orderList[t.returnKey()].loading?r("div",[t._v("加载中...")]):r("div",[t._v("-")])]),t._v(" "),r("reimburse",{ref:"reimburse",attrs:{orderItem:t.orderItem},on:{getList:t.getList}}),t._v(" "),r("reimburseTwo",{ref:"reimburseTwo",attrs:{orderItem:t.orderItem}}),t._v(" "),r("ship",{ref:"ship"})],1)},staticRenderFns:[]};var S=r("VU/8")(O,I,!1,function(t){r("q9oj"),r("lcxv")},"data-v-58688a85",null);e.default=S.exports},OBnJ:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("TToO"),a=r("7+uW"),s=r("c+8m"),i=r.n(s),n=r("DZ+H"),d=r("ymRw"),l=r("TJML"),u=r("EOM2"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=!1,e.detail="",e.refundObj={refundType:"REFUND",refundImgs:[],reason:""},e.orderId="",e.money="",e}return o.c(e,t),e.prototype.changerefundType=function(t){this.refundObj.refundType=t,console.log("退款类型",this.refundObj.refundType)},e.prototype.doRefund=function(){var t=this;console.log(this.refundObj.refundImgs.join(","));var e="/order/refund/apply",r=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderItem.orderId,money:this.orderItem.payTotal},this.refundObj);"FAIL_REFUND"==this.orderItem.detailList[0].refundStatus&&(e="/order/refund/reapply",r=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,refundId:this.orderItem.detailList[0].refundOrderList[0].refundId,money:this.orderItem.payTotal},this.refundObj)),a.default.prototype.$reqFormPost(e,r,function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);t.model=!1,t.$Message.success("申请成功"),t.$emit("getList")}else console.log("网络请求错误！")})},e.prototype.removeByValue=function(t,e){for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1);break}},e.prototype.onRead=function(t){var e=this;console.log();var r=new FormData;r.append("file",t.file),a.default.prototype.$reqFormUpload("/fileupload",r,function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message);var r=e.refundObj.refundImgs?e.refundObj.refundImgs:[];r.push(t.data.data.filename),e.refundObj.refundImgs=r,console.log("文件上传",t.data.data.filename)}else console.log("网络请求错误！")})},e.prototype.formatStatus=function(t){switch(t){case"ORDER_WAIT_PAY":return"未付款";case"ORDER_CANCEL_PAY":return"已取消";case"ORDER_WAIT_SENDGOODS":return"未发货";case"ORDER_WAIT_RECVGOODS":return"未收货";case"ORDER_END_GOODS":return"交易结束";case"ORDER_WAIT_REVIEW":return"交易完成"}},e.prototype.queryDetail=function(){var t=this;a.default.prototype.$reqFormPost("/order/queryorderdetail",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderId,money:this.money},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);t.detail=e.data.data,console.log(e.data.data)}else console.log("网络请求错误！")})},e.prototype.formatStatusColor=function(t){switch(t){case"ORDER_WAIT_SENDGOODS":case"ORDER_WAIT_RECVGOODS":case"ORDER_CANCEL_PAY":case"ORDER_WAIT_PAY":return"color:red";case"ORDER_WAIT_REVIEW":return"color:#ffc630";case"ORDER_FINISH":return"color:#ffc630;"}},e.prototype.mounted=function(){},o.b([Object(u.Prop)({required:!1})],e.prototype,"orderItem",void 0),e=o.b([i()({components:{comhead:l.a},mixins:[n.a]})],e)}(a.default),p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.model?o("div",{staticStyle:{position:"relative"}},[o("div",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"99999",position:"fixed",width:"100%",height:"100vh",top:"0",left:"0"}},[o("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{height:"100vh"}},[o("div",{staticClass:"flex flex-around-justify flex-align-center flex-v",staticStyle:{"background-color":"#fff",width:"780px",padding:"20px","border-radius":"10px",position:"relative"}},[o("div",{staticStyle:{position:"absolute",top:"10px",right:"10px"},on:{click:function(e){t.model=!1}}},[o("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:r("Bvvs")}})]),t._v(" "),o("div",{staticClass:"flex btn_refund"},[o("div",[t._v("售后类型")]),t._v(" "),o("button",{staticClass:"selectBox",class:"REFUND"==t.refundObj.refundType?"selectType":"",on:{click:function(e){t.changerefundType("REFUND")}}},[t._v("未收到货,只退款")]),t._v(" "),o("button",{staticClass:"selectBox",class:"GOODS_RETURN"==t.refundObj.refundType?"selectType":"",on:{click:function(e){t.changerefundType("GOODS_RETURN")}}},[t._v("退货退款")])]),t._v(" "),o("div",{staticStyle:{width:"100%",border:"1px #e5e5e5 solid",margin:"10px","border-radius":"8px"}},[o("div",{staticStyle:{width:"100%","border-bottom":"1px #e5e5e5 solid",height:"43px","line-height":"43px",padding:"0 10px"}},[t._v("\r\n              提示：快递到达后请拒收快递，否则退款将被拒绝\r\n            ")]),t._v(" "),o("div",{staticStyle:{padding:"5px"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.refundObj.reason,expression:"refundObj.reason"}],staticStyle:{"vertical-align":"top",width:"100%",border:"none"},attrs:{placeholder:"请填写申请理由",type:"text",name:"content",rows:"9"},domProps:{value:t.refundObj.reason},on:{input:function(e){e.target.composing||t.$set(t.refundObj,"reason",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"flex",staticStyle:{margin:"10px"}},[o("div",{staticClass:"el-upload--picture-card"},[o("van-uploader",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{width:"100%",height:"100%"},attrs:{"after-read":t.onRead,accept:"image/jpg,image/png, image/jpeg"}},[o("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),t._l(t.refundObj.refundImgs,function(e,r){return o("div",{key:r,staticClass:"el-upload--picture-card",staticStyle:{position:"relative"}},[o("img",{staticStyle:{width:"100%"},attrs:{src:e}}),t._v(" "),o("i",{staticClass:"iconfont icon-shanchu3",staticStyle:{color:"#000",position:"absolute",right:"-8px",top:"-8px",height:"17px","line-height":"17px"},on:{click:function(r){t.removeByValue(t.refundObj.refundImgs,e)}}})])})],2),t._v(" "),o("div",{staticStyle:{margin:"10px"}},[o("van-button",{staticStyle:{width:"150px",height:"45px","background-color":"#FCCB52",color:"#fff","text-align":"center","line-height":"45px","margin-right":"10px"},attrs:{size:"large"},on:{click:function(e){t.doRefund()}}},[t._v("提交")])],1)])])])]):t._e()},staticRenderFns:[]};var f=r("VU/8")(c,p,!1,function(t){r("zrGJ")},"data-v-61027f01",null);e.default=f.exports},lcxv:function(t,e){},q9oj:function(t,e){},rjHg:function(t,e){},zrGJ:function(t,e){}});
//# sourceMappingURL=1.6cb211dcf18bd596c05e.js.map