webpackJsonp([40],{LdsP:function(t,e){},afYQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("TToO"),a=s("7+uW"),o=s("c+8m"),d=s.n(o),r=s("DZ+H"),n=s("ymRw"),c=s("h1Nz"),l=s("au/Y"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.withchangeModel=!1,e.addressList=[],e.deladdress="",e.deladdressid="",e.delshow=!1,e.addshow=!1,e.province=[],e.provinceid="",e.city=[],e.cityid="",e.country=[],e.countryid="",e.updateaddressid="",e.address1="",e.contactName="",e.contactMobile="",e.isDefault=0,e.prepareId="",e.shopCartList=[],e.address={},e.totalPrice="",e.goodsSum="",e.freight="",e.pageType="",e.titlevalue="",e.couponId="",e.titleType="",e.invoiceTitle="",e.invoiceNo="",e.remark="",e}return i.c(e,t),e.prototype.isdef=function(){0==this.isDefault?this.isDefault=1:this.isDefault=0},e.prototype.addcancel=function(){this.withchangeModel=!1,this.addshow=!1},e.prototype.update=function(){this.updateaddressid=this.address.addressId,this.addshow=!0,this.provinceid=this.address.provinceid,this.cityid=this.address.cityid,this.countryid=this.address.countryid,this.address1=this.address.address,this.contactName=this.address.contactname,this.contactMobile=this.address.contactmobile,this.isDefault=this.address.isdefault,this.getprovince(),this.querycity(),this.querycountry()},e.prototype.addaddress=function(){var t=this;""!=this.provinceid?""!=this.cityid?""!=this.countryid?""!=this.address1?""!=this.contactName?""!=this.contactMobile?""!=(this.updateaddressid||"")?a.default.prototype.$reqFormPost("/address/update",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,addressId:this.updateaddressid,provinceId:this.provinceid,cityId:this.cityid,countryId:this.countryid,address:this.address1,contactName:this.contactName,contactMobile:this.contactMobile,isDefault:this.isDefault},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);t.$Message.success("保存成功"),t.provinceid="",t.cityid="",t.countryid="",t.address1="",t.contactName="",t.contactMobile="",t.isDefault=0,t.addshow=!1,t.updateaddressid=""}else console.log("网络请求错误！")}):a.default.prototype.$reqFormPost("/address/add",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,provinceId:this.provinceid,cityId:this.cityid,countryId:this.countryid,address:this.address1,contactName:this.contactName,contactMobile:this.contactMobile,isDefault:this.isDefault},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);Object(n.Toast)("新建地址成功"),t.getAddressList(),t.provinceid="",t.cityid="",t.countryid="",t.address1="",t.contactName="",t.contactMobile="",t.isDefault=0,t.addshow=!1,t.updateaddressid=""}else console.log("网络请求错误！")}):this.$Message.warning("请手机号码"):this.$Message.warning("请填写收货人"):this.$Message.warning("请填写详细地址"):this.$Message.warning("请选择市区"):this.$Message.warning("请选择城市"):this.$Message.warning("请选择省份")},e.prototype.changeprovince=function(){this.cityid="",this.city=[],this.countryid="",this.country=[],this.querycity()},e.prototype.changecity=function(){this.countryid="",this.country=[],this.querycountry()},e.prototype.setDefaultAddress=function(t){var e=this;t!=this.address.addressId&&a.default.prototype.$reqFormPost("/prepare/order/update",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,prepareId:this.$store.getters[a.default.prototype.MutationTreeType.PREPAREID],addressId:t},function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(n.Toast)(t.data.message);e.getPreInfo(e.$store.getters[a.default.prototype.MutationTreeType.PREPAREID]),e.withchangeModel=!1,e.addshow=!1}else console.log("网络请求错误！")})},e.prototype.querycity=function(){var t=this;a.default.prototype.$reqFormPost("/address/querycity",{provinceId:this.provinceid},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);console.log(e.data.data.region),t.city=e.data.data.region}else console.log("网络请求错误！")})},e.prototype.getAddressList=function(){var t=this;a.default.prototype.$reqFormPost("/address/list",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);console.log("地址列表",e.data.data.addressList),t.addressList=e.data.data.addressList,t.addressList.forEach(function(t,e){t.id=t.addressId,t.name=t.contactname,t.tel=t.contactmobile,t.readdress=t.address,t.address=t.province+t.city+t.country+t.address})}else console.log("网络请求错误！")})},e.prototype.querycountry=function(){var t=this;a.default.prototype.$reqFormPost("/address/querycountry",{cityId:this.cityid},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);console.log(e.data.data.region),t.country=e.data.data.region}else console.log("网络请求错误！")})},e.prototype.changeModel=function(t){"change"==t?(console.log("切换地址"),this.withchangeModel=!0,this.getAddressList()):(this.getprovince(),this.addshow=!1,this.provinceid="",this.cityid="",this.countryid="",this.address1="",this.contactName="",this.contactMobile="",this.isDefault=0,this.updateaddressid="",this.addshow=!0)},e.prototype.getPreInfo=function(t){var e=this;a.default.prototype.$reqFormPost1("/prepare/order/query",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,prepareId:t},function(t){if(200!==t.returnCode)return e.$Message.warning(t.message),void console.log("网络请求错误！");e.shopCartList=t.data.shopCartList,e.address=t.data.address,console.log("address",e.address),e.totalPrice=t.data.totalPrice,e.goodsSum=t.data.goodsSum,e.freight=t.data.freight})},e.prototype.onSubmit=function(){var t=this;this.address?a.default.prototype.$reqFormPost("/prepare/order/submit",{userId:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[a.default.prototype.MutationTreeType.TOKEN_INFO].token,couponId:this.couponId,titleType:this.titleType,invoiceTitle:this.invoiceTitle,invoiceNo:this.invoiceNo,prepareId:this.prepareId,remark:this.remark},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);t.$router.replace({name:"pay",query:{contactname:t.address.contactname,contactmobile:t.address.contactmobile,address:t.address.province+t.address.city+t.address.country+t.address.address,body:e.data.data.body,payId:e.data.data.payId,payTotal:e.data.data.payTotal}}),console.log(e.data.data)}else console.log("网络请求错误！")}):this.$Message.warning("请选择一个收货地址")},e.prototype.getprovince=function(){var t=this;a.default.prototype.$reqFormPost("/address/queryprovince",{},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(n.Toast)(e.data.message);console.log(e.data.data.region),t.province=e.data.data.region}else console.log("网络请求错误！")})},e.prototype.mounted=function(){this.prepareId=this.$store.getters[a.default.prototype.MutationTreeType.PREPAREID],this.getPreInfo(this.$store.getters[a.default.prototype.MutationTreeType.PREPAREID])},e=i.b([d()({components:{Wintabe:c.a,Winbeet:l.a},mixins:[r.a]})],e)}(a.default),u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-contents"},[s("wintabe",{ref:"wintabe",attrs:{table:!0,router:!0}}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:" flex   flex-pack-center "},[s("div",{staticClass:"contentBox2 "},[t.address?s("div",{staticStyle:{"line-height":"32px",margin:"20px","border-bottom":"1px solid #e5e5e5"}},[s("div",{staticClass:"flex "},[s("i",{staticClass:"iconfont icon-location"}),t._v(" "),s("span",[t._v("已选地址")]),t._v(" "),s("div",{staticClass:"flex flex-align-center flex-pack-center pointer",staticStyle:{"margin-left":"15px","background-color":"#F4C542","border-color":"#F4C542",color:"#FFFFFF","min-width":"100px",height:"32px","font-size":"14.8px"},on:{click:function(e){t.update()}}},[s("span",[t._v("修改")])])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"content_title"},[t._v("收货人：")]),t._v(" "),s("div",[t._v(t._s(t.address.contactname))])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"content_title"},[t._v("联系方式：")]),t._v(" "),s("div",[t._v(t._s(t.address.contactmobile))])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"content_title"},[t._v("收货地址：")]),t._v(" "),s("div",[t._v(t._s(t.address.province)+t._s(t.address.city)+t._s(t.address.country)+t._s(t.address.address))])])]):t._e(),t._v(" "),s("div",{staticStyle:{padding:"30px 20px"}},[s("van-button",{staticStyle:{"border-radius":"4%","background-color":"#fff",color:"red",border:"1px solid red","min-width":"150px","margin-right":"10px",overflow:"hidden"},on:{click:function(e){t.changeModel("change")}}},[t._v("地址切换")]),t._v(" "),s("van-button",{staticStyle:{"border-radius":"4%","background-color":"#fff",color:"#F4C542",border:"1px solid #F4C542","min-width":"150px","margin-right":"10px",overflow:"hidden"},on:{click:function(e){t.changeModel("add")}}},[t._v("新建地址")])],1)])]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:" flex   flex-pack-center "},[s("div",{staticClass:"contentBox2 "},[t._l(t.shopCartList,function(e,i){return s("div",{staticClass:"cartItem flex  flex-align-center flex-pack-justify"},[s("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{width:"80px",margin:"0 10px 0 20px",overflow:"hidden"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.goodsImg.split(",")[0],expression:"item.goodsImg.split(',')[0]"}],staticStyle:{width:"100%",border:"1px solid #EAEAEA"}})]),t._v(" "),s("div",{staticStyle:{overflow:"hidden",width:"200px"}},[s("div",[s("span",{staticClass:"textLabel",staticStyle:{color:"#000000","font-size":"15px"}},[t._v(t._s(e.goodsName))])]),t._v(" "),s("div",{staticClass:"textLabel",staticStyle:{color:"#666"}},[e.skuKeyValue.length>2?s("span",t._l(JSON.parse(e.skuKeyValue),function(i){return s("span",{staticStyle:{"margin-right":"10px"}},[s("span",[t._v(t._s(i.key)+":"+t._s(i.value)+" X "+t._s(e.num))])])})):s("span",[t._v("\n          X "+t._s(e.num)+"\n        ")])])]),t._v(" "),s("div",[s("span",{staticStyle:{"font-size":"20"}},[t._v("￥"+t._s(e.price))])]),t._v(" "),s("div",{},[t._v("\n  "+t._s(e.num)+"\n")]),t._v(" "),s("div",[s("span",{staticClass:"marketPrice",staticStyle:{"font-size":"20"}},[t._v("￥"+t._s((e.price*e.num).toFixed(2)))])])])}),t._v(" "),s("div",{staticStyle:{"background-color":"#FCFCFC",padding:"0 30px","font-size":"14.8px"}},[s("div",{staticClass:"flex flex-pack-justify",staticStyle:{"line-height":"30px","border-bottom":"1px #e5e5e5 solid"}},[t._m(2),t._v(" "),s("div",[s("div",{staticClass:"flex"},[s("div",[t._v("商品合计：")]),s("div",[t._v("￥"+t._s(t.totalPrice))])]),t._v(" "),s("div",{staticClass:"flex"},[s("div",[t._v("运费：")]),s("div",[t._v(t._s(t.freight))])])])]),t._v(" "),s("div",[t._m(3),t._v(" "),t._m(4),t._v(" "),s("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{padding:"20px 0"}},[s("div",[t._v("应付金额")]),t._v(" "),s("div",{staticClass:"flex flex-align-center"},[s("div",{staticStyle:{padding:"0 20px"}},[s("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v("￥"+t._s(t.totalPrice))])]),t._v(" "),s("div",{staticClass:"flex flex-align-center flex-pack-center pointer",staticStyle:{"background-color":"#F4C542","border-color":"#F4C542",color:"#FFFFFF","min-width":"120px",height:"42px","font-size":"16px"},on:{click:t.onSubmit}},[s("span",[t._v("去付款")])])])])])])],2)]),t._v(" "),s("div",{staticStyle:{position:"relative"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.withchangeModel,expression:"withchangeModel"}],staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"99999",position:"fixed",width:"100%",height:"100vh",top:"0",left:"0"}},[s("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{height:"100vh"}},[s("div",{staticClass:"flex flex-around-justify flex-v",staticStyle:{"background-color":"#fff",padding:"20px",position:"relative"}},[s("div",{staticClass:"add_colose",on:{click:function(e){t.addcancel()}}},[s("i",{staticClass:"iconfont icon-close"})]),t._v(" "),s("div",{staticClass:"add_titile"},[t._v("切换地址")]),t._v(" "),s("div",{staticClass:"flex region",staticStyle:{height:"560px",overflow:"auto"}},[s("div",t._l(t.addressList,function(e,i){return s("div",{staticClass:"bc_addres",style:t.address.addressId==e.addressId?"border-color:#f4c542":"",on:{click:function(s){t.setDefaultAddress(e.addressId)}}},[s("div",{staticClass:"flex"},[s("div",{staticStyle:{width:"100px","text-align":"right"}},[t._v("收货人：")]),t._v("\n      "+t._s(e.contactname)+"\n                      ")]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticStyle:{width:"100px","text-align":"right"}},[t._v("联系方式：")]),t._v("\n        "+t._s(e.contactmobile.substring(0,3))+"****"+t._s(e.contactmobile.substring(7,13))+"\n                      ")]),t._v(" "),s("div",{staticClass:"flex"},[s("div",{staticStyle:{width:"100px","text-align":"right"}},[t._v("收货地址：")]),t._v("\n      "+t._s(e.address)+"\n                      ")])])}))])])])])]),t._v(" "),s("div",{staticStyle:{position:"relative"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.addshow,expression:"addshow"}],staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"99999",position:"fixed",width:"100%",height:"100vh",top:"0",left:"0"}},[s("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{height:"100vh"}},[s("div",{staticClass:"flex flex-around-justify flex-v",staticStyle:{"background-color":"#fff",padding:"20px",position:"relative"}},[s("div",{staticClass:"add_colose",on:{click:function(e){t.addcancel()}}},[s("i",{staticClass:"iconfont icon-close"})]),t._v(" "),t.updateaddressid?t._e():s("div",{staticClass:"add_titile"},[t._v("新增地址")]),t._v(" "),t.updateaddressid?s("div",[t._v("修改地址")]):t._e(),t._v(" "),s("div",{staticClass:"flex region"},[s("div",{staticStyle:{"padding-right":"15px"}},[t._v("所在地区")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.provinceid,expression:"provinceid"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.provinceid=e.target.multiple?s:s[0]},t.changeprovince]}},t._l(t.province,function(e,i){return s("option",{key:i,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])})),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.cityid,expression:"cityid"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.cityid=e.target.multiple?s:s[0]},t.changecity]}},t._l(t.city,function(e,i){return s("option",{key:i,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])})),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.countryid,expression:"countryid"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.countryid=e.target.multiple?s:s[0]}}},t._l(t.country,function(e,i){return s("option",{key:i,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])}))]),t._v(" "),s("div",{staticClass:"flex region"},[s("div",{staticStyle:{"padding-right":"15px"}},[t._v("详细地址")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.address1,expression:"address1"}],domProps:{value:t.address1},on:{input:function(e){e.target.composing||(t.address1=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"flex region"},[s("div",{staticClass:"flex"},[s("div",{staticStyle:{"padding-right":"27px"}},[t._v("收货人")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.contactName,expression:"contactName"}],domProps:{value:t.contactName},on:{input:function(e){e.target.composing||(t.contactName=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"flex region"},[s("div",{staticStyle:{"padding-right":"24px","padding-left":"15px"}},[t._v("手机号码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.contactMobile,expression:"contactMobile"}],domProps:{value:t.contactMobile},on:{input:function(e){e.target.composing||(t.contactMobile=e.target.value)}}})])]),t._v(" "),s("div",{staticStyle:{"border-top":"1px solid #F4F4F4","padding-top":"20px"},on:{click:function(e){t.isdef()}}},[s("span",{staticStyle:{display:"inline-block","vertical-align":"middle",border:"1px solid #D3D3D3","border-radius":"50px",width:"15px",height:"15px","margin-right":"10px"},style:1==t.isDefault?"background-color:#FF0506;":""}),t._v("设为默认")]),t._v(" "),s("div",{staticClass:"flex region_btn"},[s("div",{on:{click:function(e){t.addaddress()}}},[t._v("确定")]),t._v(" "),s("div",{on:{click:function(e){t.addcancel()}}},[t._v("取消")])])])])])]),t._v(" "),s("winbeet")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:" flex   flex-pack-center"},[e("div",{staticStyle:{width:"60%"}},[e("div",{staticClass:"flex  flex-align-center",staticStyle:{width:"100%","background-color":"#f7f7f7",height:"47px",padding:"0 10px","margin-bottom":"10px"}},[this._v("\n  收货信息\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:" flex   flex-pack-center "},[s("div",{staticStyle:{width:"60%"}},[s("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{width:"100%","background-color":"#f7f7f7",height:"47px",padding:"0 10px","margin-bottom":"10px"}},[s("div",{staticStyle:{width:"70px","margin-left":"40px"}},[t._v("商品信息")]),t._v(" "),s("div",{staticStyle:{width:"230px"}}),t._v(" "),s("div",{staticStyle:{margin:"0 20px"}},[t._v("单价")]),t._v(" "),s("div",{staticStyle:{margin:"0 20px"}},[t._v("数量")]),t._v(" "),s("div",{staticStyle:{margin:"0 20px"}},[t._v("小计")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticStyle:{color:"#666"}},[this._v("配送方式")]),this._v(" "),e("div",[this._v("快递")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"40px","line-height":"40px"}},[this._v("给卖家的话（选填） "),e("span",{staticStyle:{margin:"0 20px",color:"#999"}},[this._v("选填内容已和卖家协商确认")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{border:"1px solid #e5e5e5"}},[e("textarea",{staticStyle:{width:"100%",border:"none"},attrs:{type:"text",name:"content",rows:"7"}})])}]};var v=s("VU/8")(p,u,!1,function(t){s("LdsP")},"data-v-35f87980",null);e.default=v.exports}});
//# sourceMappingURL=40.a845dbc6d36e02b9c06b.js.map